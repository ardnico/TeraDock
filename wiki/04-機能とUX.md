# ğŸ›ï¸ æ©Ÿèƒ½ã¨UX

## å„ªå…ˆæ©Ÿèƒ½ã®æ¦‚è¦
- æœ¬ç•ªã‚¬ãƒ¼ãƒ‰: `danger_level=critical` ã¯ connect/exec/run/push/pull/xfer/config apply ã§äºŒæ®µéšç¢ºèªã€‚ã€F:PROJECT_PLAN.mdâ€ L449-L455ã€‘ã€F:EXTERNAL_DESIGN.mdâ€ L120-L137ã€‘
- ä¾å­˜ãƒã‚§ãƒƒã‚¯: `td doctor` ãŒ ssh/scp/sftp/telnet ã®æœ‰ç„¡ã¨ TUIå¯å¦ã‚’æ¤œæŸ»ã—ã€JSON/ãƒ†ã‚­ã‚¹ãƒˆå‡ºåŠ›ã‚’é¸æŠå¯èƒ½ã€‚ã€F:EXTERNAL_DESIGN.mdâ€ L35-L53ã€‘
- æ¥ç¶šæ–¹å¼: SSH ã¯ connect/exec/run/forward ã«å¯¾å¿œã€Telnet/Serial ã¯ v0.1 ã§ connect ã®ã¿ã«é™å®šï¼ˆåˆæœŸé€ä¿¡ã¯ä»»æ„ï¼‰ã€‚ã€F:EXTERNAL_DESIGN.mdâ€ L112-L137ã€‘ã€F:PROJECT_PLAN.mdâ€ L226-L242ã€‘
- ãƒ•ã‚¡ã‚¤ãƒ«è»¢é€: push/pull/xfer ã‚’ scp/sftp åŸºæœ¬ã§æä¾›ã—ã€FTP ã¯æ˜ç¤ºè¨­å®šï¼‹ãƒ•ãƒ©ã‚°ãŒãªã„é™ã‚Šæ‹’å¦ã€‚ã€F:EXTERNAL_DESIGN.mdâ€ L140-L159ã€‘ã€F:PROJECT_PLAN.mdâ€ L245-L261ã€‘
- Config é…å¸ƒ: `td config apply` ãŒãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»planãƒ»when æ¡ä»¶ã‚’æ‰±ã„ã€`~/` ã‚’ãƒªãƒ¢ãƒ¼ãƒˆãƒ›ãƒ¼ãƒ ã¨ã—ã¦è§£é‡ˆã™ã‚‹ã€‚ã€F:EXTERNAL_DESIGN.mdâ€ L162-L180ã€‘ã€F:PROJECT_PLAN.mdâ€ L264-L283ã€‘
- ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ: `exec` ã¯å˜ç™ºã€`run` ã¯ cmdset/steps ã‚’é †åºå®Ÿè¡Œã—ã€parser ã§å‡ºåŠ›ã‚’æ§‹é€ åŒ–ã€‚ã€F:EXTERNAL_DESIGN.mdâ€ L183-L200ã€‘ã€F:PROJECT_PLAN.mdâ€ L286-L317ã€‘

## æ“ä½œãƒ•ãƒ­ãƒ¼ï¼ˆãƒ†ã‚­ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ï¼‰
```mermaid
flowchart LR
  find[List/search profiles]
  guard[Danger guard]\n(two-step confirm)
  action[Action select\nconnect/exec/run/push/pull/config]
  execjson[JSON/text output\n--format]
  logs[op_logs\nmasked secrets]
  find --> guard --> action --> execjson --> logs
```

## CLI ã‚µãƒ³ãƒ—ãƒ«
```bash
# Profile search & inspection (passwords never shown)
td list --type ssh --group prod

td connect p_example --with-forward jump_fw --format text

# Non-interactive exec with parser and JSON output schema
# parsed matches the parser spec (raw/json/regex)ã€F:PROJECT_PLAN.mdâ€ L286-L317ã€‘
td exec p_example "cat /etc/os-release" --parser json --format json

# Config apply with dry-run plan (no side effects)ã€F:PROJECT_PLAN.mdâ€ L264-L283ã€‘
td config apply p_example cfg_dotfiles --plan --backup
```

## TUI æœŸå¾…æŒ™å‹•
- Profiles ä¸€è¦§ã§ type/tag/group/danger ãƒ•ã‚£ãƒ«ã‚¿ã¨ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ã‚¿ãƒ«æ¤œç´¢ã‚’æä¾›ã€‚ã€F:PROJECT_PLAN.mdâ€ L321-L334ã€‘
- Actions ãƒšã‚¤ãƒ³ã‹ã‚‰ connect/exec/run/push/pull/config apply ã‚’å®Ÿè¡Œã€CommandSpec ã‚’è¡¨ç¤ºã—ã¦ Secret ã‚’ãƒã‚¹ã‚¯ã€‚ã€F:PROJECT_PLAN.mdâ€ L323-L335ã€‘
- Secrets ãƒšã‚¤ãƒ³ã¯ master è¨­å®šæ¸ˆã¿æ™‚ã®ã¿ reveal ã‚’è¨±å¯ã—ã€ãƒ­ã‚°ã«ã¯å€¤ã‚’æ®‹ã•ãªã„ã€‚ã€F:PROJECT_PLAN.mdâ€ L323-L329ã€‘ã€F:EXTERNAL_DESIGN.mdâ€ L97-L105ã€‘

ã‚ˆã‚Šæ·±ã„ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶ã¯ [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ç§˜å¯†ç®¡ç†](./05-ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ç§˜å¯†ç®¡ç†.md) ã‚’å‚ç…§ã€‚
